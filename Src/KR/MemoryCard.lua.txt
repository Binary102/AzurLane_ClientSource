slot0 = class("MemoryCard")

slot0.Ctor = function (slot0, slot1)
	slot0.go = slot1
	slot0.tf = slot1.transform
	slot0.lock = findTF(slot0.tf, "lock")
	slot0.txCondition = findTF(slot0.lock, "condition")
	slot0.normal = findTF(slot0.tf, "normal")
	slot0.txTitle = findTF(slot0.normal, "title")
	slot0.txSubtitle = findTF(slot0.normal, "subtitle")
	slot0.group = findTF(slot0.tf, "group")
	slot0.groupTitle = findTF(slot0.group, "title")
	slot0.groupCount = findTF(slot0.group, "count")
end

slot0.update = function (slot0, slot1, slot2)
	slot0.isGroup = slot1
	slot0.info = slot2

	slot0:flush()
end

slot0.flush = function (slot0)
	setActive(slot0.lock, false)
	setActive(slot0.normal, false)
	setActive(slot0.group, false)

	if slot0.isGroup then
		setActive(slot0.group, true)
		setText(slot0.groupTitle, HXSet.hxLan(slot0.info.title))
		GetImageSpriteFromAtlasAsync("memoryicon/" .. slot0.info.icon, "", slot0.group, true)

		slot1 = 0
		slot2 = #slot0.info.memories

		for slot6, slot7 in ipairs(slot0.info.memories) do
			if pg.memory_template[slot7].is_open == 1 or pg.StoryMgr.GetInstance():IsPlayed(slot8.story) then
				slot1 = slot1 + 1
			end
		end

		setText(slot0.groupCount, slot1 .. "/" .. slot2)
	elseif slot0.info.is_open == 1 or pg.StoryMgr.GetInstance():IsPlayed(slot0.info.story) then
		setActive(slot0.normal, true)
		setText(slot0.txTitle, HXSet.hxLan(slot0.info.title))
		setText(slot0.txSubtitle, HXSet.hxLan(slot0.info.subtitle))
		GetImageSpriteFromAtlasAsync("memoryicon/" .. slot0.info.icon, "", slot0.normal)
	else
		setActive(slot0.lock, true)
		setText(slot0.txCondition, HXSet.hxLan(slot0.info.condition))
	end
end

slot0.clear = function (slot0)
	return
end

return slot0
